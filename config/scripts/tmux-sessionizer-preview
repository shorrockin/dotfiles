#!/usr/bin/env bash

# Preview script for tmux-sessionizer
# Handles two formats:
# - "●session:" for existing tmux sessions
# - "session:/path" for configured directories

selection="$1"

# Parse format: "●session:" or "session:/path"
if [[ "$selection" =~ ^●(.+):$ ]]; then
    # Existing tmux session - show windows
    session="${BASH_REMATCH[1]}"
    tmux list-windows -t "$session" 2>/dev/null
elif [[ "$selection" =~ ^([^:]+):(.+)$ ]]; then
    # Configured directory - show contents
    directory="${BASH_REMATCH[2]}"
    if [[ -d "$directory" ]]; then
        ls -la --color=always "$directory" 2>/dev/null | head -50
    else
        echo "Directory not found: $directory"
    fi
else
    echo "Invalid selection format: $selection"
fi
